# Phase 1: åŸºç¡€è®¾æ–½ + è®¤è¯

> çŠ¶æ€: ğŸš§ è¿›è¡Œä¸­ | å¼€å§‹: 2026-01-30

## 1.1 Supabase é¡¹ç›®åˆå§‹åŒ–

| ä»»åŠ¡ | çŠ¶æ€ | äº§å‡º |
|------|------|------|
| åˆ›å»º Supabase é¡¹ç›® | â¬œ å¾…åš | é¡¹ç›® URL + API Key |
| é…ç½®ç¯å¢ƒå˜é‡ | â¬œ å¾…åš | `.env` æ–‡ä»¶ |
| å®‰è£… @supabase/supabase-js | â¬œ å¾…åš | package.json |
| åˆ›å»º Supabase å®¢æˆ·ç«¯ | â¬œ å¾…åš | `src/lib/supabase.ts` |

### éªŒæ”¶æ ‡å‡†
- [ ] `supabase.auth.getSession()` èƒ½æ­£å¸¸è°ƒç”¨
- [ ] æ§åˆ¶å°æ— æŠ¥é”™

---

## 1.2 æ•°æ®åº“ Schema

| ä»»åŠ¡ | çŠ¶æ€ | äº§å‡º |
|------|------|------|
| åˆ›å»º profiles è¡¨ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| åˆ›å»º courses è¡¨ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| åˆ›å»º chapters è¡¨ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| åˆ›å»º orders è¡¨ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| åˆ›å»º progress è¡¨ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| é…ç½® RLS ç­–ç•¥ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| åˆ›å»ºè§¦å‘å™¨ | â¬œ å¾…åš | SQL å·²æ‰§è¡Œ |
| ç”Ÿæˆ TypeScript ç±»å‹ | â¬œ å¾…åš | `src/types/database.ts` |

### éªŒæ”¶æ ‡å‡†
- [ ] Supabase Dashboard èƒ½çœ‹åˆ°æ‰€æœ‰è¡¨
- [ ] RLS ç­–ç•¥ç”Ÿæ•ˆï¼ˆæœªç™»å½•ç”¨æˆ·åªèƒ½çœ‹ published è¯¾ç¨‹ï¼‰

---

## 1.3 ç”¨æˆ·è®¤è¯

| ä»»åŠ¡ | çŠ¶æ€ | äº§å‡º |
|------|------|------|
| åˆ›å»º useAuth Hook | â¬œ å¾…åš | `src/hooks/useAuth.ts` |
| åˆ›å»ºç™»å½•é¡µé¢ | â¬œ å¾…åš | `src/pages/auth/Login.tsx` |
| åˆ›å»ºæ³¨å†Œé¡µé¢ | â¬œ å¾…åš | `src/pages/auth/Register.tsx` |
| åˆ›å»º OAuth å›è°ƒé¡µé¢ | â¬œ å¾…åš | `src/pages/auth/Callback.tsx` |
| é…ç½® GitHub OAuth | â¬œ å¾…åš | Supabase Dashboard |
| åˆ›å»º ProtectedRoute ç»„ä»¶ | â¬œ å¾…åš | `src/components/ProtectedRoute.tsx` |
| æ›´æ–°è·¯ç”±é…ç½® | â¬œ å¾…åš | `src/App.tsx` |
| Navbar æ˜¾ç¤ºç™»å½•çŠ¶æ€ | â¬œ å¾…åš | `src/components/Navbar.tsx` |

### éªŒæ”¶æ ‡å‡†
- [ ] é‚®ç®±æ³¨å†Œ â†’ æ”¶åˆ°éªŒè¯é‚®ä»¶ â†’ ç‚¹å‡»éªŒè¯ â†’ ç™»å½•æˆåŠŸ
- [ ] GitHub ç™»å½• â†’ è·³è½¬æˆæƒ â†’ å›è°ƒ â†’ ç™»å½•æˆåŠŸ
- [ ] ç™»å½•å Navbar æ˜¾ç¤ºç”¨æˆ·å¤´åƒ
- [ ] æœªç™»å½•è®¿é—® /admin â†’ é‡å®šå‘åˆ° /auth/login

---

## 1.4 Cloudflare R2 å­˜å‚¨

| ä»»åŠ¡ | çŠ¶æ€ | äº§å‡º |
|------|------|------|
| åˆ›å»º R2 Bucket | â¬œ å¾…åš | Cloudflare Dashboard |
| é…ç½®å…¬å¼€è®¿é—® | â¬œ å¾…åš | è‡ªå®šä¹‰åŸŸåæˆ– R2.dev |
| åˆ›å»º Supabase Edge Function | â¬œ å¾…åš | `supabase/functions/get-upload-url/` |
| å‰ç«¯å›¾ç‰‡ä¸Šä¼ ç»„ä»¶ | â¬œ å¾…åš | `src/components/ImageUpload.tsx` |

### éªŒæ”¶æ ‡å‡†
- [ ] ä¸Šä¼ å›¾ç‰‡ â†’ è¿”å›å…¬å¼€ URL â†’ å›¾ç‰‡å¯è®¿é—®

---

## ç›¸å…³æ–‡æ¡£

- [æŠ€æœ¯æ¶æ„](./TECH-SPEC.md) - è¯¦ç»†æŠ€æœ¯æ–¹æ¡ˆ
- [äº§å“éœ€æ±‚](./PRD.md) - åŠŸèƒ½éœ€æ±‚è¯´æ˜

---

## çŠ¶æ€å›¾ä¾‹

| å›¾æ ‡ | å«ä¹‰ |
|------|------|
| â¬œ | å¾…åš |
| ğŸ”„ | è¿›è¡Œä¸­ |
| âœ… | å·²å®Œæˆ |
| âŒ | å·²å–æ¶ˆ |
| ğŸš« | é˜»å¡ä¸­ |

---

[PROTOCOL]: ä»»åŠ¡çŠ¶æ€å˜æ›´æ—¶æ›´æ–°æ­¤æ–‡æ¡£
